:root {
    --neon-cyan: #0ff; --neon-green: #3f3; --neon-pink: #f0f;
    --dark-bg: #050505; --card-bg: #fff;
    --gold-gradient: linear-gradient(145deg, #ffd700, #ffae00, #bf953f, #fcf6ba, #b38728);
    --red-gradient: linear-gradient(145deg, #ff0000, #cc0000, #990000);
}

/* 1. 스크롤 및 바운스 방지 */
* { -webkit-tap-highlight-color: transparent; outline: none; box-sizing: border-box; }
html, body { 
    position: fixed; width: 100%; height: 100%; overflow: hidden; 
    margin: 0; padding: 0; touch-action: none; -webkit-overflow-scrolling: none;
}

body { 
    background: url('Casinotable.jpg') no-repeat center center fixed;
    background-size: cover; color: #eee; font-family: 'Pretendard', sans-serif; 
    display: flex; justify-content: center; align-items: center; 
}

/* 2. 가변적인 레이아웃 (Viewport 대응) */
#main-screen {
    position: fixed; inset: 0; width: 100%; height: 100%;
    background: url('Seven Hi.gif') no-repeat center center;
    background-size: cover; z-index: 1000; display: flex; 
    flex-direction: column; justify-content: center; align-items: center;
}
.main-btn-group { display: flex; flex-direction: column; gap: 2vh; width: 80vw; max-width: 400px; }

.btn-main {
    padding: 3vh; font-weight: 900; border: 0.4vh solid #bf953f; border-radius: 1.5vh;
    box-shadow: 0 0 2vh rgba(255, 0, 0, 0.4); color: #fff; font-size: 3vh;
}
#btn-start { background: var(--red-gradient); border-color: #ffd700; }
#btn-tutorial { background: var(--gold-gradient); color: #000; border-color: #990000; }

/* 3. 사이드바 및 게임 보드 가변 크기 조정 */
#side-container {
    width: 22vw; height: 90vh; margin-right: 1.5vw;
    display: flex; flex-direction: column;
}
.score-title {
    font-size: 2vh; font-weight: 900; background: var(--gold-gradient); color: #000;
    height: 4vh; border-radius: 0.5vh; display: flex; align-items: center; justify-content: center;
}
#side-score { display: flex; flex-direction: column; gap: 0.5vh; flex-grow: 1; overflow: hidden; }

.score-player-unit {
    flex: 1; background: rgba(0,0,0,0.85); border-radius: 1vh; padding: 0.5vh 1vh;
    display: flex; flex-direction: column; justify-content: center;
}
.p-total-label { font-size: 4vh; font-weight: 900; }
.p-mini-table td { height: 2vh; font-size: 1.4vh; }

.game-board {
    width: 65vw; height: 95vh; background: url('tablecloth.png'); background-size: cover;
    padding: 1vh; border-radius: 2vh; border: 0.4vh solid #5d4037;
    display: flex; flex-direction: column; align-items: center; position: relative;
}

.static-gold-box { font-size: 2.5vh; height: 5vh; width: 100%; background: var(--gold-gradient); color: #000; border-radius: 1vh; display: flex; align-items: center; justify-content: center; }
#round-info { font-size: 2vh; margin: 0.5vh 0; font-weight: bold; }

.player-zone {
    flex: 1; width: 95%; background: rgba(255,255,255,0.05); border-radius: 1vh;
    display: flex; align-items: center; padding: 0 1vh; margin-bottom: 0.5vh;
}
.p-meta { width: 12vh; text-align: center; }
.p-result { font-size: 1.8vh; }

.cards-row { display: flex; gap: 0.5vh; flex-grow: 1; height: 85%; align-items: center; justify-content: flex-start; }

/* 4. 카드 및 애니메이션 최적화 */
.card {
    height: 100%; aspect-ratio: 5/7; border-radius: 0.8vh;
    font-size: 1.2vh; will-change: transform, opacity; /* GPU 가속 */
}
.card .suit { font-size: 2.2vh; }
.card .val { font-size: 2.8vh; }

/* 5. 터치 반응성 (지연 해소 및 크기) */
.action-btn-group { display: flex; gap: 1vh; width: 100%; padding: 1vh; }
.action-btn-group button {
    flex: 1; height: 6vh; font-size: 2vh; border-radius: 1vh;
    touch-action: manipulation; /* 더블탭 방지 */
}

/* 튜토리얼 최적화 */
.tutorial-msg-box { width: 90vw; max-height: 80vh; overflow-y: auto; padding: 2vh; }
.tut-table { width: 100%; font-size: 1.4vh; margin: 1vh 0; }

#deck-info { width: 8vw; height: 80vh; background: rgba(0,0,0,0.6); border-radius: 1vh; margin-left: 1vw; }
.mini-card { height: 7vh; width: calc(7vh * 5/7); font-size: 0.8vh; }

@media screen and (orientation: portrait) {
    body::after {
        content: "Please rotate your device to landscape mode.";
        position: fixed; inset: 0; background: #000; color: #fff;
        display: flex; align-items: center; justify-content: center; z-index: 9999;
    }
}